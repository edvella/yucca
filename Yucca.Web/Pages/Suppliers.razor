@page "/suppliers"
@using Yucca.Inventory
@inject HttpClient Http

<h3>Suppliers</h3>

<ul>
    @if (suppliers != null && suppliers.Any())
    {
        foreach (var supplier in suppliers)
        {
            <li>@supplier.Name</li>
        }
    }
    else
    {
        <li>No suppliers available.</li>
    }
</ul>

<h4>Add Supplier</h4>
<input @bind="newSupplierName" placeholder="Enter supplier name" />
<button @onclick="AddSupplier">Add</button>

@code {
    private List<Supplier> suppliers = new();
    private string newSupplierName;

    protected override async Task OnInitializedAsync()
    {
        suppliers = await Http.GetFromJsonAsync<List<Supplier>>("http://localhost:5294/api/supplier");
    }

    private async Task AddSupplier()
    {
        var newSupplier = new Supplier { Name = newSupplierName };
        var response = await Http.PostAsJsonAsync("http://localhost:5294/api/supplier", newSupplier);

        if (response.IsSuccessStatusCode)
        {
            suppliers.Add(newSupplier);
            newSupplierName = string.Empty;
        }
    }
}